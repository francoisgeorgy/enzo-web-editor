<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Enzo Web Editor</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="description" content="Control your Meris Enzo efefct pedal directly from your web browser." />
    <meta name="author" content="FranÃ§ois Georgy" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,500,700|Roboto+Condensed:300,400,700" rel="stylesheet" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <script src="bundle.js"></script>
</head>
<body>
    <div id="main" class="main-default zoom-1">

        <div id="title">
            <div class="neon">Enzo web editor</div>
            <div class="menu">
                <span class="menu-entry"><a id="menu-init" href="#"><i class="fa fa-bolt" aria-hidden="true"></i> <span class="menu-text">Init</a></span>
                <span class="menu-entry"><a id="menu-randomize" href="#"><i class="fa fa-random" aria-hidden="true"></i> <span class="menu-text">Randomize</a></span>
                <span class="menu-entry"><a id="menu-get-url" href="#" title="Get a bookmarkable URL for the current preset"><i class="far fa-bookmark" aria-hidden="true"></i> URL</a></span>
                <span class="menu-entry"><a id="menu-load-preset" href="#" title="Load a preset from a .syx file"><i class="far fa-folder-open" aria-hidden="true"></i> <span class="menu-text">Load</a></span>
                <span class="menu-entry"><a id="menu-send" href="#" title="Update the Enzo with the current preset"><i class="fas fa-upload"></i> Send</a></span> <!--&#8651;-->
                <span class="menu-entry"><a id="menu-print-preset" href="#" title="display the current preset for printing"><i class="fas fa-print" aria-hidden="true"></i> <span class="menu-text">Print</a></span>
                <span class="menu-entry"><a id="menu-midi" href="#"><i class="fas fa-exchange-alt" aria-hidden="true"></i> <span class="menu-text">Midi</a></span>
                <span class="menu-entry"><a id="menu-settings" href="#"><i class="fas fa-cog" aria-hidden="true"></i> Settings</a></span>    <!--&#x2699;-->
                <span class="menu-entry"><a id="menu-help" href="#"><i class="fas fa-question"></i> <span class="menu-text">Help</a></span>
                <span class="menu-entry"><a id="menu-about" href="#"><i class="fas fa-info"></i> <span class="menu-text">About</a></span>      <!--&#x3f;-->
                <span class="menu-entry"><a id="menu-zoom-out" href="#"><i class="fas fa-search-minus"></i></a></span>
                <span class="menu-entry"><a id="menu-zoom-in" href="#"><i class="fas fa-search-plus"></i></a></span>
            </div>
        </div>

        <div id="messages">
            <div id="error-message">
            </div>
            <div id="info-message">
            </div>
        </div>

        <div id="options">
            <div>
                <div style="float:right"><i id="midi-in-led" class="fas fa-arrow-circle-down"></i> <i id="midi-out-led" class="fas fa-arrow-circle-up"></i></div>
                <div>MIDI</div>
            </div>
            <div>
                input:
                <select id="midi-input-device">
                    <option>- select -</option>
                </select>
            </div>
            <div>
                output:
                <select id="midi-output-device">
                    <option>- select -</option>
                </select>
            </div>
            <div>
                channel:
                <select id="midi-channel">
                    <option value="all">all</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                </select>
            </div>
        </div>

        <!--
            PRESET CHANGE AND QUICK ACCESS
        -->
        <div id="presets" class="grid-default">
            <div class="header">
                <div>presets</div>
            </div>
            <div class="preset-selection">
                <div id="pc-down" class="preset preset-sel">-</div>
                <div id="pc-up" class="preset preset-sel">+</div>
                <div id="pc-1" class="preset preset-id">1</div>
                <div id="pc-2" class="preset preset-id">2</div>
                <div id="pc-3" class="preset preset-id">3</div>
                <div id="pc-4" class="preset preset-id">4</div>
                <div id="pc-5" class="preset preset-id">5</div>
                <div id="pc-6" class="preset preset-id">6</div>
                <div id="pc-7" class="preset preset-id">7</div>
                <div id="pc-8" class="preset preset-id">8</div>
                <div id="pc-9" class="preset preset-id">9</div>
                <div id="pc-10" class="preset preset-id">10</div>
                <div id="pc-11" class="preset preset-id">11</div>
                <div id="pc-12" class="preset preset-id">12</div>
                <div id="pc-13" class="preset preset-id">13</div>
                <div id="pc-14" class="preset preset-id">14</div>
                <div id="pc-15" class="preset preset-id">15</div>
                <div id="pc-16" class="preset preset-id">16</div>
            </div>
        </div>

        <!--
            TODO: EXPRESSION PEDAL
        -->

        <!--
            PITCH
        -->
        <div id="pitch" class="grid-default">>
            <div class="header">
                <div class="header-shortcut">[C,V]</div>
                <div>pitch</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-16"></svg>
            </div>
        </div>

        <!--
            PORTAMENTO
        -->
        <div id="portamento" class="grid-default">>
            <div class="header">
                <div class="header-shortcut">[O]</div>
                <div>portamento</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-22"></svg>
            </div>
        </div>

        <!--
            FILTER
        -->
        <div id="filter" class="grid-default">>
            <div class="header">
                <div class="header-shortcut">[F,G]</div>
                <div>filter</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-17"></svg>
            </div>
        </div>

        <!--
            FILTER TYPE
        -->
        <div id="filter-type" class="grid-default">>
            <div class="header">
                <div>filter type</div>
            </div>
            <div id="cc-23-options" class="grid-3x2">
                <div id="cc-23-0" class="bt">LP</div>
                <div id="cc-23-87" class="bt">v. LP</div>
                <div id="cc-23-32" class="bt">BP</div>
                <div id="cc-23-115" class="bt">v. BP</div>
                <div id="cc-23-59" class="bt">HP</div>
                <div id="cc-23-127" class="bt">v. HP</div>
            </div>
        </div>

        <!--
            MIX
        -->
        <div id="mix" class="grid-default">>
            <div class="header">
                <div class="header-shortcut">[Y,X]</div>
                <div>mix</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-18"></svg>
            </div>
        </div>

        <!--
            DELAY LEVEL
        -->
        <div id="delay-level" class="grid-default">>
            <div class="header">
                <div class="header-shortcut">[K,L]</div>
                <div>delay level</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-24"></svg>
            </div>
        </div>

        <!--
            SUSTAIN
        -->
        <div id="sustain" class="grid-default">>
            <div class="header">
                <div class="header-shortcut">[DEL,B,N]</div>
                <div>sustain</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-19"></svg>
            </div>
        </div>

        <!--
            RING MODULATION
        -->
        <div id="ring-mod" class="grid-default">>
            <div class="header">
                <div class="header-shortcut">[Z,U]</div>
                <div>ring mod</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-25"></svg>
            </div>
        </div>

        <!--
            FILTER ENVELOPE
        -->
        <div id="filter-env" class="grid-default">>
            <div class="header">
                <div>filter env</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-20"></svg>
            </div>
        </div>

        <!--
            FILTER BANDWITDH
        -->
        <div id="filter-bandwidth" class="grid-default">>
            <div class="header">
                <div class="header-shortcut">[H,J]</div>
                <div>filter Q</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-26"></svg>
            </div>
        </div>

        <!--
            MODULATION
        -->
        <div id="modulation" class="grid-default">>
            <div class="header">
                <div class="header-shortcut">[-,+]</div>
                <div>modulation</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-21"></svg>
            </div>
        </div>

        <!--
            DELAY FEEDBACK
        -->
        <div id="delay-feedback" class="grid-default">>
            <div class="header">
                <div>delay-feedback</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-27"></svg>
            </div>
        </div>

        <!--
            TAP
        -->
        <div id="tap" class="grid-default">>
            <div class="header">
                <div class="header-shortcut">[T]</div>
                <div>tap</div>
            </div>
            <div class="controls">
                <div class="stompswitch">
                    <div id="cc-28-127" class="swm">
                        <i id="cc-28-127-off" class="fas fa-circle" aria-hidden="true" title="click to switch on"></i>
                        <i id="cc-28-127-on" class="sw-off sw-on fas fa-circle" aria-hidden="true" title="click to switch off"></i>
                    </div>
                </div>
            </div>
        </div>

        <!--
            MAX DELAY FEEDBACK
        -->
<!--
        <div id="max-delay-feedback" class="grid-default">>
            <div class="header">
                <div>max delay feedback</div>
            </div>
            <div class="controls">
            </div>
        </div>
-->

        <!--
            TEMPO
        -->
        <div id="tempo" class="grid-default">>
            <div class="header">
                <div>tempo</div>
            </div>
            <div class="controls">
                <svg class="knob" id="cc-15"></svg>
            </div>
        </div>

        <!--
            ENVELOPE TYPE
        -->
        <div id="env-type" class="grid-default">>
            <div class="header">
                <div>envelope type</div>
            </div>
            <div id="cc-9-options">
                <div id="cc-9-0" class="bt">TRIGGERED</div>
                <div id="cc-9-127" class="bt">FOLLOWER</div>
            </div>
        </div>

        <!--
            SYNTH MODE
        -->
        <div id="synth-mode" class="grid-default">>
            <div class="header">
                <div>synth mode</div>
            </div>
            <div id="cc-29-options">
                <div id="cc-29-0" class="bt">DRY</div>
                <div id="cc-29-63" class="bt">MONO</div>
                <div id="cc-29-95" class="bt">ARP</div>
                <div id="cc-29-127" class="bt">POLY</div>
            </div>
        </div>

        <!--
            SYNTH WAVESHAPE
        -->
        <div id="waveshape" class="grid-default">>
            <div class="header">
                <div>waveshape</div>
            </div>
            <div id="cc-30-options">
                <div id="cc-30-0" class="bt">SAWTOOTH</div>
                <div id="cc-30-127" class="bt">SQUARE</div>
            </div>
        </div>

        <!--
            BYPASS
        -->
        <div id="bypass" class="grid-default">>
            <div class="header">
                <div class="header-shortcut">[SPACE]</div>
                <div>bypass</div>
            </div>
            <div class="controls">
                <div class="stompswitch">
                    <div id="cc-14-127" class="sw"><i class="fas fa-circle" aria-hidden="true" title="click to switch on"></i></div>
                    <div id="cc-14-0" class="sw sw-off sw-on"><i class="fas fa-circle" aria-hidden="true" title="click to switch off"></i></div>
                </div>
            </div>
        </div>

        <div id="global-settings" class="grid-global-settings">
            <div class="header">
                <div>
                    <span style="float:right" class="close-settings-panel">&#x2715;</span>
                    GLOBAL SETTINGS
                </div>

            </div>
        </div>

    </div>

    <div id="load-preset-dialog" class="dialog lity-hide">
        <h2>Load preset from file</h2>
        <div id="import-dialog-instructions">
            Select a file containing an Enzo preset (.syx file):
        </div>
        <div style="margin:10px 0;">
            <input type="file" id="preset-file" placeholder="preset file" />
        </div>
        <div id="load-preset-error" style="margin:10px 0;color:red">
        </div>
    </div>

    <div id="credits-dialog" class="dialog lity-hide">
        <a href="https://github.com/francoisgeorgy/enzo-web-editor">
            <img style="position: absolute; top: 0; right: 0; border: 0;"
                 src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67"
                 alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>
        <div class="enzo-gold" style="font-size:2rem;font-weight:bold">
            Enzo Web Interface <span class="version">2.0.0</span>
        </div>
        <p>
            <i class="fas fa-exclamation-triangle"></i>
            Still under active development. Feel free to log bugs/issues.
        </p>
        <p>Enzo Web Editor is under <strong>GNU General Public License v3.0</strong>. <a href="https://github.com/francoisgeorgy/enzo-web-editor/blob/master/LICENSE" target="_blank" >View license</a>.</p>
        <h1 style="margin-top:20px">Credits</h1>
        <p>This application uses the following Open Source components:</p>
        <ul>
            <li><a href="https://github.com/cotejp/webmidi" target="_blank" rel="noopener">WebMidi.js</a> helps you tame the <a href="https://www.w3.org/TR/webmidi/" target="_blank">Web MIDI API</a>.</li>
            <li><a href="https://github.com/francoisgeorgy/svg-knob" target="_blank" rel="noopener">svg-knob</a>: a flexible and customizable knob for your web applications.</li>
            <li><a href="http://sorgalla.com/lity/" target="_blank" rel="noopener">Lity</a>: a lightweight, accessible and responsive lightbox.</li>
            <li><a href="https://jquery.com/" target="_blank" rel="noopener">jQuery</a>: a fast, small, and feature-rich JavaScript library.</li>
            <li><a href="https://yarnpkg.com/en/package/rxjs" target="_blank" rel="noopener">RxJS</a>: reactive Extensions for modern JavaScript .</li>
            <li><a href="https://yarnpkg.com/en/package/storejs" target="_blank" rel="noopener">storejs</a>: local storage localstorage package provides a simple API.</li>
            <li><a href="https://github.com/DamonOehlman/detect-browser" target="_blank" rel="noopener">detect-browser</a>: unpack a browser type and version from the useragent string.</li>
            <li><a href="http://fontawesome.io/" target="_blank" rel="noopener">Font Awesome</a>: the iconic font and CSS toolkit.</li>
            <li><a href="https://fonts.google.com/specimen/Roboto" target="_blank" rel="noopener">Roboto font</a> by Google.</li>
        </ul>
        <p class="trademarks">
            This application is not endorsed by, directly affiliated with, maintained, or sponsored by Meris.<br />
        </p>
    </div>

    <div id="help-dialog" class="dialog lity-hide">
        <h2>Instructions</h2>
        <ol>
            <li>Allow the browser to access your MIDI devices.</li>
            <li>If it's not already done, connect your Enzo to its MIDI adapter.</li>
            <li>When the Enzo is connected the logo will glow.</li>
            <li>Move a knob on your Enzo, the corresponding on-screen control must move accordingly.</li>
        </ol>
        <h4>Knobs:</h4>
        <ul>
            <li>To move the knobs, use the mouse.</li>
            <li>Click and drag over the knob. You can also use the mousewheel.</li>
        </ul>
        <h4>Keyboard shortcuts:</h4>
        <div style="display:flex;flex-direction: row">
            <ul style="margin-top: 0;">
                <li>ESC: close dialog</li>
                <li>SPACE BAR: Bypass on/off</li>
                <li>0..9: presets 1..10</li>
                <li>Up, Right, +: next preset</li>
                <li>Down, Left, -: previous preset</li>
                <li>T: TAP</li>
                <li>I: Init</li>
                <li>R: Randomize</li>
                <li>D,A,M,P: Dry, Arp, Mono, Poly</li>
                <li>W: Sawtooth wave</li>
                <li>Q: Square wave</li>
            </ul>
            <ul style="margin-top: 0;margin-left:40px">
                <li>C, V: animate pitch</li>
                <li>B, N: animate sustain</li>
                <li>F, G: animate filter</li>
                <li>H, J: animate filter Q</li>
                <li>Y, X: animate mix</li>
                <li>K, L: animate delay level</li>
                <li>Z, U: animate ring mod</li>
                <li>-, +: animate modulation</li>
                <li>O: animate portamento</li>
                <li>DEL: animate sustain to 0</li>
            </ul>
        </div>
        Use shift to play animation until 50%.
        <div class="dialog-info">
            <span style="float:right">ESC to close</span>
        </div>
    </div>

<!--
    <div id="settings-panel" class="panel" style="display:none">
        <h2><span style="float:right" class="close-settings-panel">&#x2715;</span>Settings</h2>
        <div id="settings-dialog-instructions">
        </div>
        <div id="settings-dialog-error" style="color:red ">
        </div>
        <div class="dialog-info">
            <span style="float:right">ESC to close</span>
            All changes are immediately saved and applied.
        </div>
    </div>
-->

    <svg xmlns="http://www.w3.org/2000/svg" width="1" height="0" style="display:block">
        <defs>
            <linearGradient id="grad" gradientTransform="rotate(65)">
                <stop offset="0%" stop-color="#555" />
                <stop offset="95%" stop-color="#222" />
            </linearGradient>
        </defs>
    </svg>

</body>
</html>
